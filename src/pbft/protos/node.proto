syntax = "proto3";

package protos;

import "gorums.proto";
option go_package = ".";

service PBFTNode {
  rpc PrePrepare(PrePrepareRequest) returns (CommitResponse) {
    option (gorums.quorumcall) = true;
    option (gorums.broadcast) = true;
    option (gorums.broadcast.call) = "Prepare";
   }
  rpc Prepare(PrepareRequest) returns (Empty) {
    option (gorums.broadcast) = true;
    option (gorums.broadcast.call) = "Commit";
   }
  rpc Commit(CommitRequest) returns (CommitResponse) {
    option (gorums.broadcast) = true;
    option (gorums.broadcast.call) = "Client";
   }
}

message PrePrepareRequest {
  int32 Id = 1;
  string Value = 2;
}

message PrepareRequest {
  int32 Id = 1;
  string Value = 2;
}

message CommitRequest {
  int32 Id = 1;
  string Value = 2;
}

message CommitResponse {
  int32 Id = 1;
  string Value = 2;
}

message Empty {}
